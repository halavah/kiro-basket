# 问题描述 - 数据看板数据为空

**截图**: PixPin_2025-12-18_16-34-01.png
**时间**: 2025-12-18 16:34:01
**状态**: ⚠️ 待修复
**页面**: `http://localhost:5173/` (数据看板)

## 🐛 问题概述

数据看板页面显示所有数据为空或零值：
- 今日订单数：0
- 今日销售额：¥0
- 今日佣金：¥0
- 库存预警：0
- 累计订单数：0
- 累计销售额：¥0
- 累计佣金：¥0
- 库存预警：0
- 销售趋势图表：无数据
- 订单状态分布：无数据
- 热销商品 Top 5：No Data

## 🔍 问题原因分析

1. **数据库未初始化**
   - MySQL 数据库中缺少订单、商品等基础数据
   - MongoDB 数据库中缺少统计数据（dashboard_stats 集合）

2. **可能的 API 问题**
   - 后端统计 API 未正确聚合数据
   - 数据库查询条件有误

## 📊 影响范围

- 数据看板所有统计指标
- 影响团长查看业务数据和决策

## 🔧 解决方案

### 1. 初始化数据库（必须）

运行数据库初始化脚本：

```bash
# Windows
D:\software_yare\node192\bin\init-db.bat

# 或者直接运行
cd D:\software_yare\node192\server-init
npm run init
```

### 2. 检查后端 API

检查文件：`server/src/controllers/dashboard.controller.js`

确保以下接口正常工作：
- `GET /api/captain/dashboard/stats` - 核心统计数据
- `GET /api/captain/dashboard/sales-trend` - 销售趋势
- `GET /api/captain/dashboard/order-status` - 订单状态分布
- `GET /api/captain/dashboard/top-products` - 热销商品
- `GET /api/captain/dashboard/stock-alerts` - 库存预警

### 3. 验证数据

初始化后应该看到：
- MongoDB `dashboard_stats` 集合有近 7 天的统计数据
- MySQL 数据库有订单、商品、分类等测试数据

## 🧪 测试步骤

1. 运行数据库初始化脚本
2. 重启后端服务
3. 刷新数据看板页面
4. 验证所有数据正常显示

## 📝 相关文件

- 前端：`client-captain/src/views/Dashboard/Dashboard.vue`
- 后端控制器：`server/src/controllers/dashboard.controller.js`
- 数据库脚本：`aries/chapter02/database/mysql/seed.sql`
- MongoDB 数据：`aries/chapter02/database/mongodb/init.js`

---

**创建时间**: 2025-12-18
**优先级**: 🔴 高
